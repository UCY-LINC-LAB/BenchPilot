<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/BenchPilot/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=BenchPilot/livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Experiments
  #

Before starting the benchmarking process, you need to define (i) the cluster under test, and (ii) the experiments you want to perform.

  Defining your Cluster
  #

By defining you cluster, Benchpilot removes the effort of you needing to download docker, docker compose and every docker image you may need for your benchmarking on your worker devices. All you need to do is define your cluster inside the /BenchPilotSDK/conf/bench-cluster.yaml.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/BenchPilot/docs/experiments/">
  <meta property="og:site_name" content="BenchPilot">
  <meta property="og:title" content="Experiments">
  <meta property="og:description" content="Experiments # Before starting the benchmarking process, you need to define (i) the cluster under test, and (ii) the experiments you want to perform.
Defining your Cluster # By defining you cluster, Benchpilot removes the effort of you needing to download docker, docker compose and every docker image you may need for your benchmarking on your worker devices. All you need to do is define your cluster inside the /BenchPilotSDK/conf/bench-cluster.yaml.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>Experiments | BenchPilot</title>
<link rel="manifest" href="/BenchPilot/manifest.json">
<link rel="icon" href="/BenchPilot/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/BenchPilot/book.min.fb69d0e92fcd17fb4042199e803e6bfa0ec2c53ccb74bf57e949532662854dff.css" integrity="sha256-&#43;2nQ6S/NF/tAQhmegD5r&#43;g7CxTzLdL9X6UlTJmKFTf8=" crossorigin="anonymous">
  <script defer src="/BenchPilot/flexsearch.min.js"></script>
  <script defer src="/BenchPilot/en.search.min.8136477acc5c78a0da5e61b4619c3ed9184b243181a0f84a6d37c9fe3934bfb8.js" integrity="sha256-gTZHesxceKDaXmG0YZw&#43;2RhLJDGBoPhKbTfJ/jk0v7g=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/BenchPilot/"><img src="/BenchPilot/images/plane.png" alt="Logo" /><span>BenchPilot</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/getting-started/" class="">Getting Started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/installation/" class="">Installation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/experiments/" class="active">Experiments</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/workloads/" class="">Workloads</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/monitoring/" class="">Monitoring</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/experiment-analysis/" class="">Post-Experiment Analysis</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/BenchPilot/docs/exteding-framework/" class="">Exteding BenchPilot</a>
  

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="http://linc.ucy.ac.cy" target="_blank" rel="noopener">
        About Us
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/BenchPilot/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Experiments</strong>

  <label for="toc-control">
    
    <img src="/BenchPilot/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#defining-your-cluster">Defining your Cluster</a></li>
    <li><a href="#defining-your-experiments">Defining your Experiments</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="strong-stylecolor-40897bexperimentsstrong">
  <strong style="color: #40897B">Experiments</strong>
  <a class="anchor" href="#strong-stylecolor-40897bexperimentsstrong">#</a>
</h1>
<p>Before starting the benchmarking process, you need to define (i) <strong style="color: #40897B">the cluster</strong> under test, and (ii) <strong style="color: #40897B">the experiments</strong> you want to perform.</p>
<h2 id="defining-your-cluster">
  Defining your Cluster
  <a class="anchor" href="#defining-your-cluster">#</a>
</h2>
<p>By defining you cluster, Benchpilot removes the effort of you needing to download docker, docker compose and every docker image you may need for your benchmarking on your worker devices. All you need to do is define your cluster inside the <em>/BenchPilotSDK/conf/bench-cluster.yaml</em>.</p>
<p>Inside the &ldquo;bench-cluster.yaml&rdquo; we define our cluster nodes. So as we can see below, we define our cluster with the keywoard &ldquo;<strong style="color: #40897B">cluster</strong>&rdquo;, and afterwards we define the manager, where the benchpilot client will be deployed on, and the nodes that are represented as workers.</p>
<p>For all nodes, it is needed to define their <strong style="color: #40897B">ip</strong>, and proxy - if needed, and for each worker it&rsquo;s required to define their <strong style="color: #40897B">hostname</strong>, and <strong style="color: #40897B">authentication credentials</strong>. These credentials include the <strong style="color: #40897B">username</strong>, and <strong style="color: #40897B">password</strong> or the <strong style="color: #40897B">path to an ssh key</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">cluster</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">manager</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ip</span>: <span style="color:#e6db74">&#34;0.0.0.0&#34;</span> <span style="color:#75715e"># assign the IP of the device that will run the benchpilot client</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># in case of not using a proxy - remove the following 3 lines</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">proxies</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">http_proxy</span>: <span style="color:#e6db74">&#34;http://example.proxy.com:8080/&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">https_proxy</span>: <span style="color:#e6db74">&#34;https://example.proxy.com:8080/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nodes</span>: <span style="color:#75715e"># here define the nodes that you will benchmark</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">ip</span>: <span style="color:#e6db74">&#34;10.10.10.10&#34;</span> <span style="color:#75715e"># example of ip</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostname</span>: <span style="color:#e6db74">&#34;raspberrypi&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">username</span>: <span style="color:#e6db74">&#34;pi&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">password</span>: <span style="color:#e6db74">&#34;raspberrypi&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">ip</span>: <span style="color:#e6db74">&#34;10.11.11.11&#34;</span> <span style="color:#75715e"># another example using ssh key</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostname</span>: <span style="color:#e6db74">&#34;old_server&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">username</span>: <span style="color:#e6db74">&#34;ubuntu&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ssh_key_path</span>: <span style="color:#e6db74">&#34;BenchPilotSDK/conf/ssh_keys/ssh_key.pem&#34;</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">proxies</span>: <span style="color:#75715e"># if your device is placed behind a proxy you should also include these</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">http_proxy</span>: <span style="color:#e6db74">&#34;http://example.proxy.com:8080/&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">https_proxy</span>: <span style="color:#e6db74">&#34;https://example.proxy.com:8080/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">..</span>
</span></span></code></pre></div><p>** Please keep in mind that every hostname and ip you declare needs to be accessible by the node you will run the BenchPilot client on.</p>
<h2 id="defining-your-experiments">
  Defining your Experiments
  <a class="anchor" href="#defining-your-experiments">#</a>
</h2>
<p>After defining our cluster, our final step before starting the benchmarking process is to define our experiments! All you need to is define them in a yaml file under <em>/BenchPilotSDK/conf/</em> using the BenchPilot Model.</p>
<p>The <em>BenchPilot model</em> is composed with <strong style="color: #40897B">experiments</strong>, where each experiments consists of <strong style="color: #40897B">workload</strong> descriptions.</p>
<p>For each <em>experiment</em>, you have to define the following:</p>
<ul>
<li><strong style="color: #40897B">record_name</strong>, so that you can later on retrieve monitoring metrics based on it,</li>
<li>number of <strong style="color: #40897B">repetitions</strong> that the experiment will be conducted.</li>
<li>the <strong style="color: #40897B">duration</strong> of the whole experiment.</li>
</ul>
<p>On the other hand, every <em>workload</em>, needs to have the following descriptions:</p>
<ul>
<li><strong style="color: #40897B">name</strong>, which will be selected from the supported <a href="https://ucy-linc-lab.github.io/BenchPilot/docs/workloads/">workload list</a>, e.g. &ldquo;marketing-campaign&rdquo;.</li>
<li><strong style="color: #40897B">cluster</strong>, which consists the list of resources that will be used as workers to deploy the workload.</li>
<li><strong style="color: #40897B">orchestrator</strong>, this is optional. One can define the underlying orchestrator that will be used for the deployment, the default is docker swarm.</li>
<li><strong style="color: #40897B">duration</strong>: This parameter specifies the length of time that a particular workload will be deployed. It is important that this duration exceeds the duration of the experiment. Alternatively, you can simply enter &ldquo;default&rdquo; if preferred.</li>
<li>specific workload <strong style="color: #40897B">parameters</strong>: you can find more information regarding the parameters <a href="https://ucy-linc-lab.github.io/BenchPilot/docs/workloads/">here</a>.</li>
</ul>
<p>An example of the <em>/BenchPilotSDK/conf/demo.yaml</em> can be found below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">idle_between_experiments</span>: <span style="color:#e6db74">&#34;2m&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">experiments</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">experiment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">record_name</span>: <span style="color:#e6db74">&#34;mlStorm_old_server&#34;</span> <span style="color:#75715e"># name must be &lt; 63 characters</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">repetition</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">duration</span>: <span style="color:#e6db74">&#34;default&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">workloads</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;mlperf&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">cluster</span>: [<span style="color:#e6db74">&#34;old_server&#34;</span>] <span style="color:#75715e"># workers&#39; hostnames</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">orchestrator</span>: <span style="color:#e6db74">&#34;swarm&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">duration</span>: <span style="color:#e6db74">&#34;8m&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">dataset_folder</span>: <span style="color:#e6db74">&#34;imagenet2012&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">model_file</span>: <span style="color:#e6db74">&#34;resnet50_v1.onnx&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">profile</span>: <span style="color:#e6db74">&#34;resnet50-onnxruntime&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">data_volume_path</span>: <span style="color:#e6db74">&#34;/mlperf/data&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">model_volume_path</span>: <span style="color:#e6db74">&#34;/mlperf/model&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">output_volume_path</span>: <span style="color:#e6db74">&#34;/mlperf/output&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">worker_threads</span>: <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;marketing-campaign&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">cluster</span>: [<span style="color:#e6db74">&#34;old_server&#34;</span>] <span style="color:#75715e"># workers&#39; hostnames</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">duration</span>: <span style="color:#e6db74">&#34;8m&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">num_of_campaigns</span>: <span style="color:#ae81ff">100000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">capacity_per_window</span>: <span style="color:#ae81ff">10000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">kafka_event_count</span>: <span style="color:#ae81ff">100000000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">time_divisor</span>: <span style="color:#ae81ff">10000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">workload_tuples_per_second_emission</span>: <span style="color:#ae81ff">1000000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">engine</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;storm&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">ackers</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">executors_per_node</span>: [ <span style="color:#ae81ff">4</span> ]
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">ui_port</span>: <span style="color:#e6db74">&#34;8080&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">experiment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">record_name</span>: <span style="color:#e6db74">&#34;mdb_scpu_rpi&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">repetition</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">duration</span>: <span style="color:#e6db74">&#34;default&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">workloads</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;database&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">duration</span>: <span style="color:#e6db74">&#34;20m&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">cluster</span>: [ <span style="color:#e6db74">&#34;raspberrypi&#34;</span> ] <span style="color:#75715e"># workers&#39; hostnames</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">db</span>: <span style="color:#e6db74">&#34;mongodb&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">threads</span>: <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;simple&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">cluster</span>: [ <span style="color:#e6db74">&#34;raspberrypi&#34;</span> ] <span style="color:#75715e"># workers&#39; hostnames</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">service</span>: <span style="color:#e6db74">&#34;stress&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">options</span>:
</span></span><span style="display:flex;"><span>              - <span style="color:#f92672">&#34;--cpu&#34;: </span><span style="color:#e6db74">&#34;4&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">..</span>
</span></span></code></pre></div><p>** BenchPilot will run the experiments with the order you described them.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#defining-your-cluster">Defining your Cluster</a></li>
    <li><a href="#defining-your-experiments">Defining your Experiments</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












